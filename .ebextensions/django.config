packages:
    yum:
        postgresql-devel: []

commands:
    01_postgres_activate:
        command: "sudo amazon-linux-extras enable postgresql10"
    02_postgres_install:
        command: "sudo yum install -y postgresql-devel"

container_commands:
    01_makemigrations:
        command: "source /var/app/venv/*/bin/activate && python swe1app/manage.py makemigrations --noinput"
        leader_only: true
    02_migrate:
        command: "source /var/app/venv/*/bin/activate && python swe1app/manage.py migrate --noinput"
        leader_only: true
    03_superuser:
        command: "source /var/app/venv/*/bin/activate && python swe1app/manage.py createsu"
        leader_only: true

option_settings:
    aws:elasticbeanstalk:application:environment: 
        DJANGO_SETTINGS_MODULE: "swe1app.settings"
        PYTHONPATH: "/var/app/current:$PYTHONPATH"
    aws:elasticbeanstalk:container:python:
        WSGIPath: "swe1app.wsgi:application"